import React from 'react';
import Header from '@/components/Header';
import Footer from '@/components/Footer';
import { useLanguage } from '@/context/LanguageContext';
import { Card, CardContent } from '@/components/ui/card';
import { Check } from 'lucide-react';
import {
  DropdownMenu,
  DropdownMenuTrigger,
  DropdownMenuContent,
  DropdownMenuItem
} from '@/components/ui/dropdown-menu';
import {
  Accordion,
  AccordionItem,
  AccordionTrigger,
  AccordionContent
} from '@/components/ui/accordion';

// Services data structure with both languages
const serviceData = {
  ru: {
    title: "Наши услуги",
    subtitle: "Медицинские услуги спортивного медицинского центра в Астане",
    sections: [
      {
        title: "Отделение спортивной медицины и медико-биологического обеспечения",
        services: [
          {
            title: "Углубленный медицинский осмотр",
            description: `Углубленный медицинский осмотр в соответствии с Приказом Министра культуры и спорта Республики Казахстан от 24 декабря 2020 года № 356 «Об утверждении правил медицинского обследования спортсменов для участия в спортивных соревнованиях»
Программа углубленного медицинского осмотра зависит от контингента лиц, занимающихся физической культурой и спортом, этапа спортивной подготовки, спортивной специализации.
Углублённое медицинское обследование спортсменов проводится с целью получения наиболее полной и всесторонней информации о физическом развитии, состоянии здоровья, а также функциональных возможностях спортсмена.
Такие обследования позволяют:
• Оценить текущее состояние здоровья и физическое развитие;
• Определить уровень физической работоспособности и адаптационные резервы организма;
• Отследить динамику изменений под влиянием тренировок и соревнований;
• Выявить факторы риска и признаки переутомления;
• Сформировать индивидуальные рекомендации по планированию тренировочного процесса, восстановлению и профилактике травм.
По итогам обследования специалисты Спортивного медицинского центра выдают официальное заключение о состоянии здоровья справку №027/у для допуска к тренировочному процессу и соревнованиям.`
          },
          {
            title: "Консультации спортсменов по заболеванию врачом спортивной медицины"
          },
          {
            title: "Медицинское обеспечение спортивных мероприятий, соревнований"
          },
          {
            title: "Антропометрия для оценки физического развития"
          },
          {
            title: "Анализ композиции состава тела на InBody570"
          },
          {
            title: "Функциональные пробы для определения общей физической работоспособности",
            description: `• Проба Мартине,
• Проба Руфье
• Гарвардский степ-тест,
• 3-х минутный бег на месте с высоким подниманием бедра,
• 3-х минутный бой с тенью`
          }
        ]
      },
      {
        title: "Отделении функциональной диагностики",
        services: [
          {
            title: "Услуги кабинета ультразвуковой диагностики:",
            description: `• УЗИ щитовидной железы
• УЗИ молочной железы
• УЗИ сердца (эхокардиография)
• УЗИ органов брюшной полости и забрюшинного пространства (печень, желчный пузырь, поджелудочная железа, селезёнка, почки)
• УЗИ забрюшинного пространства (почки, надпочечники)
• УЗИ мочевого пузыря с определением остаточной мочи
• УЗИ органов малого таза (трансабдоминально, трансвагинально)
• УЗИ мягких тканей`
          },
          {
            title: "Функциональная диагностика",
            description: `• Спирография
• ЭКГ в покое
• ЭКГ после физических нагрузок
• Суточное холтеровское мониторирование ЭКГ (ХМ ЭКГ)`
          }
        ]
      },
      {
        title: "Отделение физиотерапии, лечебной физкультуры и массажа",
        services: [
          {
            title: "Перечень услуг реабилитолога",
            description: `• Прием, консультация
• Мануально-мышечное тестирование
• Мануальная терапия (траст, Mulligan, PNF, FDM, суставные мобилизации, мягкие мануальные техники)
• Метод «Сухие иглы»
• Лечебная физкультура (кинезитерапия)
• Физиотерапия (УВТ, SIS, TR-therapy)
• Массаж (Перкуссионный массаж, вакуумный, спортивный, IASTM)
• Диагностика и лечение заболевании ОДА (суставы, позвоночник, мягкие ткани)
• Реабилитация спортивных травм
• Реабилитация после операции
• PRP`
          }
        ]
      },
      {
        title: "Отделение специалистов по профилю",
        services: [
          {
            title: "Консультация невропатолог",
            description: "Паравертебральная блокада"
          },
          {
            title: "Консультация хирурга – травматолога",
            description: `Новокаиновая блокада местная инфильтрационна. Наложение гипса при всех видах перелома. Ослабление гипсовой повязки с перевязкой. Замена гипсовой повязки. Снятие гипсовой повязки. Пункция/инъекция околосуставной сумки (1 сустав), блокада лекарствами. Закрытое вправление неосложненных вывихов конечностей. Закрытая репозиция неосложненных переломов конечностей. Пункция сустава, гематроз`
          },
          {
            title: "Консультация офтальмолога",
            description: "Определение остроты зрения через таблицу Сивцева, Головина"
          },
          {
            title: "Консультация кардиолога"
          },
          {
            title: "Консультация гинеколога"
          },
          {
            title: "Консультация эндокринолога"
          },
          {
            title: "Консультация стоматолога"
          },
          {
            title: "Консультация отоларинголога"
          }
        ]
      }
    ],
    contactBlock: {
      addressTitle: "Адрес:",
      address: "Куйши Дина 36А, Астана",
      phone: "+7 (706) 606-3636"
    }
  },
  kz: {
    title: "Біздің қызметтеріміз",
    subtitle: "Астанадағы спорттық медициналық орталықтың медициналық қызметтері",
    sections: [
      {
        title: "Спорттық медицина және медициналық-биологиялық қамтамасыз ету бөлімі",
        services: [
          {
            title: "Тереңдетілген медициналық тексеру",
            description: `Қазақстан Республикасы Мәдениет және спорт министрінің 2020 жылғы 24 желтоқсандағы № 356 «Спорттық жарыстарға қатысу үшін спортшыларға медициналық тексеру ережелерін бекіту туралы» бұйрығына сәйкес тереңдетілген медициналық тексеру.
Тереңдетілген медициналық тексеру бағдарламасы дене шынықтыру және спортпен шұғылданатын адамдар контингентіне, спорттық дайындық кезеңіне, спорттық мамандануға байланысты.
Спортшыларды тереңдетілген медициналық тексеру дене дамуы, денсаулық жағдайы, сондай-ақ спортшының функционалдық мүмкіндіктері туралы толық және жан-жақты ақпарат алу мақсатында жүргізіледі.
Мұндай тексерулер мүмкіндік береді:
• Ағымдағы денсаулық жағдайы мен физикалық дамуын бағалау;
• Дене жұмысқа қабілеттілігі мен ағзаның бейімделу қорын анықтау;
• Жаттығулар мен жарыстардың әсерінен өзгерістер динамикасын қадағалау;
• Қауіп факторлары мен шаршау белгілерін анықтау;
• Жаттығу процесін жоспарлау, қалпына келтіру және жарақаттардың алдын алу бойынша жеке ұсыныстар қалыптастыру.
Тексеру нәтижесі бойынша Спорттық медициналық орталықтың мамандары жаттығу процесіне және жарыстарға жіберу үшін №027/у денсаулық жағдайы туралы ресми қорытынды анықтама береді.`
          },
          {
            title: "Спортшыларға спорт медицинасы дәрігерінің ауру бойынша кеңес беруі"
          },
          {
            title: "Спорттық іс-шараларды, жарыстарды медициналық қамтамасыз ету"
          },
          {
            title: "Физикалық дамуды бағалау үшін антропометрия"
          },
          {
            title: "InBody570-де дене композициясын талдау"
          },
          {
            title: "Жалпы физикалық жұмыс қабілеттілігін анықтау үшін функционалдық сынақтар",
            description: `• Мартине сынамасы,
• Руфье сынамасы
• Гарвард степ-тесті,
• Санды жоғары көтеріп орнында 3 минут жүгіру,
• 3 минуттық көлеңкемен бокс`
          }
        ]
      },
      {
        title: "Функционалдық диагностика бөлімі",
        services: [
          {
            title: "Ультрадыбыстық диагностика кабинетінің қызметтері:",
            description: `• Қалқанша безінің УДЗ
• Сүт безінің УДЗ
• Жүрек УДЗ (эхокардиография)
• Құрсақ қуысы және ретроперитонеалды кеңістік мүшелерінің УДЗ (бауыр, өт қабы, ұйқы безі, көкбауыр, бүйректер)
• Ретроперитонеалды кеңістіктің УДЗ (бүйректер, бүйрек үсті бездері)
• Қалдық зәрді анықтай отырып, қуықтың УДЗ
• Кіші жамбас мүшелерінің УДЗ (трансабдоминальды, трансвагинальды)
• Жұмсақ тіндердің УДЗ`
          },
          {
            title: "Функционалдық диагностика",
            description: `• Спирография
• ЭКГ тыныштық кезінде
• Физикалық жүктемеден кейінгі ЭКГ
• ЭКГ-нің тәуліктік холтерлік мониторингі (ХМ ЭКГ)`
          }
        ]
      },
      {
        title: "Физиотерапия, емдік дене шынықтыру және массаж бөлімі",
        services: [
          {
            title: "Реабилитолог қызметтерінің тізімі",
            description: `• Қабылдау, кеңес беру
• Мануальды-бұлшықет тестілеуі
• Мануалды терапия (траст, Mulligan, PNF, FDM, буын мобилизациясы, жұмсақ мануалды техникалар)
• «Құрғақ инелер» әдісі
• Емдік дене шынықтыру (кинезитерапия)
• Физиотерапия (УВТ, SIS, TR-therapy)
• Массаж (Перкуссиялық массаж, вакуумдық, спорттық, IASTM)
• ТҚА ауруларын диагностикалау және емдеу (буындар, омыртқа, жұмсақ тіндер)
• Спорттық жарақаттарды оңалту
• Операциядан кейінгі оңалту
• PRP`
          }
        ]
      },
      {
        title: "Бейіндік мамандар бөлімі",
        services: [
          {
            title: "Невропатолог кеңесі",
            description: "Паравертебральды блокада"
          },
          {
            title: "Хирург-травматолог кеңесі",
            description: `Жергілікті инфильтрациялық новокаиндық блокада. Барлық сынық түрлерінде гипс қолдану. Байлаумен гипс таңғышын босату. Гипс таңғышын ауыстыру. Гипс таңғышын шешу. Буын маңындағы қапшықты тесу/инъекция (1 буын), дәрілермен блокада. Аяқ-қолдардың асқынбаған шығуларын жабық түзету. Аяқ-қолдардың асқынбаған сынықтарының жабық репозициясы. Буынды тесу, гематроз`
          },
          {
            title: "Офтальмолог кеңесі",
            description: "Сивцев, Головин кестесі арқылы көру өткірлігін анықтау"
          },
          {
            title: "Кардиолог кеңесі"
          },
          {
            title: "Гинеколог кеңесі"
          },
          {
            title: "Эндокринолог кеңесі"
          },
          {
            title: "Стоматолог кеңесі"
          },
          {
            title: "Отоларинголог кеңесі"
          }
        ]
      }
    ],
    contactBlock: {
      addressTitle: "Мекенжай:",
      address: "Куйши Дина 36А, Астана",
      phone: "+7 (706) 606-3636"
    }
  }
};

const Services: React.FC = () => {
  const { language } = useLanguage();
  const lang = language as "ru" | "kz";
  const data = serviceData[lang];

  return (
    <>
      <Header />
      <section className="py-16 bg-gov-light-blue min-h-screen section-padding animate-fade-in">
        <div className="container mx-auto px-4">
          <h1 className="text-4xl font-serif font-bold text-gov-dark-blue mb-8 text-center">
            {data.title}
          </h1>
          <p className="mb-10 text-lg text-gray-700 text-center max-w-2xl mx-auto">{data.subtitle}</p>
          
          {/* Department Sections */}
          {data.sections.map((section, sectionIndex) => (
            <div key={sectionIndex} className="mb-16">
              <h2 className="text-2xl font-serif font-bold text-gov-blue mb-6 border-b-2 border-gov-blue pb-2">
                {section.title}
              </h2>
              
              <div className="space-y-8">
                <Accordion type="single" collapsible className="w-full">
                  {section.services.map((service, serviceIndex) => {
                    // Detect if the description contains multiple options (lines starting with •, -, or similar)
                    const hasOptions = service.description && /(^|\n)[•\-]/.test(service.description);
                    let options = [];
                    if (hasOptions) {
                      options = service.description
                        .split(/\n|\r/)
                        .filter(line => line.trim().match(/^[•\-]/))
                        .map(line => line.replace(/^[•\-]\s*/, ''));
                    }
                    if (hasOptions) {
                      return (
                        <Card key={serviceIndex} className="bg-white/90 shadow hover:shadow-md transition-shadow">
                          <AccordionItem value={service.title + sectionIndex}>
                            <AccordionTrigger className="text-lg font-medium text-gov-dark-blue px-6 py-4">
                              <div className="flex items-center">
                                <Check className="text-gov-blue flex-shrink-0 mr-3 w-5 h-5" />
                                {service.title}
                              </div>
                            </AccordionTrigger>
                            <AccordionContent>
                              <ul className="list-disc pl-8 text-gray-600">
                                {options.map((option, idx) => (
                                  <li key={idx}>{option}</li>
                                ))}
                              </ul>
                            </AccordionContent>
                          </AccordionItem>
                        </Card>
                      );
                    } else {
                      return (
                        <Card key={serviceIndex} className="bg-white/90 shadow hover:shadow-md transition-shadow">
                          <CardContent className="p-6">
                            <div className="flex items-start">
                              <Check className="text-gov-blue flex-shrink-0 mt-1 mr-3 w-5 h-5" />
                              <div>
                                <h3 className="text-lg font-medium text-gov-dark-blue">{service.title}</h3>
                                {service.description && (
                                  <div className="mt-2 text-gray-600 whitespace-pre-line">
                                    {service.description}
                                  </div>
                                )}
                              </div>
                            </div>
                          </CardContent>
                        </Card>
                      );
                    }
                  })}
                </Accordion>
              </div>
            </div>
          ))}
          
          {/* Contact Information */}
          <div className="bg-gov-blue p-8 rounded-lg mt-12 shadow-lg max-w-xl mx-auto text-center">
            <div className="flex flex-col items-center">
              <div className="flex items-center text-white mb-2">
                <span className="mr-2">🏥</span>
                <span className="font-semibold">
                  {data.contactBlock.addressTitle} {data.contactBlock.address}
                </span>
              </div>
              <div className="flex items-center text-white">
                <span className="mr-2">📞</span>
                <span>{data.contactBlock.phone}</span>
              </div>
            </div>
          </div>
        </div>
      </section>
      <Footer />
    </>
  );
};

export default Services;
